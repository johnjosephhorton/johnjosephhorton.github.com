<html><head> <style> body{
    margin: 0 auto;
    font-family: Georgia, Palatino, serif;
    color: #444444;
    line-height: 1;
/*    max-width: 960px;*/
    max-width: 540px; 
    padding: 30px;
}
h1, h2, h3, h4 {
    color: #111111;
    font-weight: 400;
}
h1, h2, h3, h4, h5, p {
    margin-bottom: 24px;
    padding: 0;
}
h1 {
    font-size: 48px;
}
h2 {
    font-size: 36px;
    /* The bottom margin is small. It's designed to be used with gray meta text
     * below a post title. */
    margin: 24px 0 6px;
}
h3 {
    font-size: 24px;
}
h4 {
    font-size: 21px;
}
h5 {
    font-size: 18px;
}
a {
    color: #0099ff;
    margin: 0;
    padding: 0;
    vertical-align: baseline;
}
a:hover {
    text-decoration: none;
    color: #ff6600;
}
a:visited {
    color: purple;
}
ul, ol {
    padding: 0;
    margin: 0;
}
li {
    line-height: 24px;
}
li ul, li ul {
    margin-left: 24px;
}
p, ul, ol {
    font-size: 16px;
    line-height: 24px;
/*    max-width: 540px; */
     max-width: 540px; 
}



/* Stuff from Rstudio */

pre {	
   margin-top: 0;
   max-width: 95%;
   border: 1px solid #ccc;
   white-space: pre-wrap;
}

pre code {
   display: block; padding: 0.5em;
}

code.r, code.cpp {
   background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

/* pre { */
/*     padding: 0px 24px; */
/*     max-width: 800px; */
/*     white-space: pre-wrap; */
/* } */
/* code { */
/*     font-family: Consolas, Monaco, Andale Mono, monospace; */
/*     line-height: 1.5; */
/*     font-size: 13px; */
/* } */
/* aside { */
/*     display: block; */
/*     float: right; */
/*     width: 390px; */
/* } */
/* blockquote { */
/*     border-left:.5em solid #eee; */
/*     padding: 0 2em; */
/*     margin-left:0; */
/*     max-width: 476px; */
/* } */
/* blockquote  cite { */
/*     font-size:14px; */
/*     line-height:20px; */
/*     color:#bfbfbf; */
/* } */
/* blockquote cite:before { */
/*     content: '\2014 \00A0'; */
/* } */

/* blockquote p {   */
/*     color: #666; */
/*     max-width: 460px; */
/* } */
/* hr { */
/*     width: 540px; */
/*     text-align: left; */
/*     margin: 0 auto 0 0; */
/*     color: #999; */
/* } */

/* Code below this line is copyright Twitter Inc. */
 </style> <style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: rgb(88, 72, 246)
   }

   pre .number {
     color: rgb(0, 0, 205);
   }

   pre .comment {
     color: rgb(76, 136, 107);
   }

   pre .keyword {
     color: rgb(0, 0, 255);
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: rgb(3, 106, 7);
   }
</style>

 <script>
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>
 <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
</script> <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9193153-6']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> </head><body> <h1>Power Calculations without Greek Letters</h1>

<h5>Posted by <a href="http://john-joseph-horton.com">John J. Horton</a>, March 2013</h5>

<hr/>

<p>&ldquo;How long should I run my experiment for?&rdquo; is a common statistical question within companies.
This question can be answered with a well-understood process: conduct a <a href="http://en.wikipedia.org/wiki/Statistical_power">power calculation</a>. </p>

<p>Although this &ldquo;works,&rdquo; I haven&#39;t found it to be very effective as a business practice.
The problem is that the key concepts for a conventional power calculation are difficult to grasp. 
Even very smart people&mdash;researcher, science journalists etc.&mdash;have trouble understanding the proper interpretion of <a href="http://andrewgelman.com/2013/03/12/misunderstanding-the-p-value/">p-values</a>. 
The main risks&mdash;Type I and Type II errors&mdash;might be the least descriptively-named concepts in history.</p>

<p>Even the name &ldquo;power calculation&rdquo; suggests something obscure but at the same time something rote that does not require much thinking beyond plugging the right things into a fomula.
This is unfortunate, because a well done power analysis can be like a dry rehearsal for the experiment, exposing problems in plan beyond just a too-small proposed sample size. </p>

<p>So what&#39;s my solution? 
It&#39;s still a work-in-progess, but my emerging best practice is to simulate data from the experiment many times and then plot the empirical distribution of the effect size, using the same code that we will use to analyze the experiment.
I then show the would-be experimenter the distribution, explain what it means and get a sense of they &ldquo;feel&rdquo; about it. 
Doing this seems to help would-be experimenters get a more more intuitive sense of the relationship between sample size and sampling variance. </p>

<p>Below, I describe my basic strategy for helping someone conduct a power calculation. 
At the end, I work through a full example. </p>

<h2>1. Pick an outcome and simulate its distribution</h2>

<p>Picking a good outcome metrics is critical for the experiment.
Sometimes the right metric is obvious, but other times, ther are several viable candidates, each with pluses and minuses. 
When presented with the question of what metrics to look at, would-be experimenters often want to split the baby and just look at a whole bunch of outcomes. 
However, people can be easily convinved of why this isn&#39;t a good idea (a link to this <a href="http://xkcd.com/882/">cartoon</a> can help). </p>

<p>A classic power calculation makes use of the fact that the sampling distribution of the average treatment effect will be approximately normally distributed. 
The central limit theorem means that the you don&#39;t <em>need</em> to know the distribution the metric is calculated from.
However, doing the power calculation via simulation has several advantaes. </p>

<ul>
<li><p>I think it&#39;s harder to mess up than the alternative&mdash;writing probability statements, transforming variables, using the right critical values etc. </p></li>
<li><p>The complexity of the estimator is irrelevant&mdash;if you can use it to analyze the data, you can use it for the power calculation. In other words, you are not restricted to doing power calculations with formulas you can look up (like means comparison for a t-test). </p></li>
<li><p>Simulating the data lets you to model and explore more complex treatment effect scenarios beyond just shifts in a mean. For example, it&#39;s not uncommon for a product manager to hypothesize that a feature might &ldquo;only work for big clients&rdquo;&mdash;doing a standard power calculation in such a setting would be a challenge, but with simulation, it&#39;s easy. </p></li>
<li><p>Being forced to simulate the data forces you to understand the data generating process beyond just finding the mean and standard deviation. </p></li>
</ul>

<h2>2. Simulate the analysis of the experiment under different assumptions</h2>

<p>The would-be experimenter probably cannot tell you &ldquo;I want to be able to detect a 5% increase with 80% probability at the 0.05 significance level.&rdquo; 
If they could, they&#39;d probably do their own power calculation. 
However, when you show them what will happen with a particular metric and particular sample size, they can often talk about the results in terms of the business case&mdash;i.e.,
how much confidence they need in the magnitude and direction of some effect.</p>

<blockquote>
<p><em>Me</em>: Let&#39;s imagine this feature decreases converstions by 5%. If we ran the experiment a whole bunch of times, this is the distribution of effect estimates we&#39;d get (<em>run simulation and make plot</em>)</p>

<p><em>Them:</em> Woah - there&#39;s a 40% chance we&#39;d find a <em>positive</em> effect? That&#39;s no good. We&#39;d walk right into that. </p>

<p><em>Me:</em> Ok, let&#39;s increase the sample by 50% (<em>re-run simulation with new sample size</em>)</p>

<p><em>Them:</em> Ah - that&#39;s much better. I can see that if it&#39;s that bad, we&#39;ll almost certainly see a negative effect. </p>
</blockquote>

<p>Notice the words &ldquo;p-value&rdquo; or &ldquo;Type I or Type II&rdquo; error never needed to be said. We can talk strictly about effect sizes and and probabilities. </p>

<h2>An example with R code</h2>

<p>To make this more concrete, let&#39;s suppose we have to make some changes to the business (the status quo isn&#39;t possible), but we have two options to test. 
For simplicity, we&#39;ll just call one option the control and the other cell the treatment. 
And suppose we are otherwise indifferent between the two methods, so at the end of the experiment, we&#39;re just going to pick the one that does better. 
This kind of example seems to cover the majority of industrial applications of testing. </p>

<p>Let&#39;s suppose that the metric is how much a client spends. 
In this horse-race scenario, we don&#39;t care about statistical significance&mdash;we&#39;re going to pick the cell with the best point estimate. 
However, we&#39;d like to have some sense of our chance of picking the losing horse. 
The point of our analysis is to see how often we pick the wrong hose for a given sample size, under an assumption about how bad the bad hourse actually is. </p>

<p>Suppose we know that historically, spend is log normally distributed, with parameters: </p>

<pre><code class="r">mu &lt;- 3.8
sigma &lt;- 1.8
</code></pre>

<p>And suppose we think the treatment feature will raise spend by 5% vis-a-vis the control.  </p>

<pre><code class="r">effect &lt;- 0.05
</code></pre>

<p>We can simulate the data assuming 500 subjects in each experimental cell:  </p>

<pre><code class="r">n &lt;- 500
set.seed(6152011)
spend.control &lt;- exp(rnorm(n, mu, sigma))
spend.treatment &lt;- exp(rnorm(n, mu + effect, sigma))
df &lt;- data.frame(spend = c(spend.control, spend.treatment), cell = c(rep(&quot;ctrl&quot;, 
    n), rep(&quot;trt&quot;, n)))
</code></pre>

<p>We can then perform the regression we would actually perform in practice: </p>

<pre><code class="r">m &lt;- lm(log(spend) ~ cell, data = df)
summary(m)
</code></pre>

<pre><code>## 
## Call:
## lm(formula = log(spend) ~ cell, data = df)
## 
## Residuals:
##    Min     1Q Median     3Q    Max 
##  -6.06  -1.21  -0.05   1.21   5.58 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   3.8813     0.0808   48.01   &lt;2e-16 ***
## celltrt      -0.2001     0.1143   -1.75     0.08 .  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1 
## 
## Residual standard error: 1.81 on 998 degrees of freedom
## Multiple R-squared: 0.00306, Adjusted R-squared: 0.00206 
## F-statistic: 3.06 on 1 and 998 DF,  p-value: 0.0804
</code></pre>

<p>We can see that with this particular choice of random seed (my daughter&#39;s birthday), the point estimate of the treatment is <em>negative</em> 20%. The 5% increase (the true value) is not within the 95% prediction interval. Let&#39;s now simulate running this experiment multiple times. </p>

<pre><code class="r">library(ggplot2)
get.tau &lt;- function(effect, sample.size) {
    spend.control &lt;- exp(rnorm(sample.size, mu, sigma))
    spend.treatment &lt;- exp(rnorm(sample.size, mu + effect, sigma))
    df &lt;- data.frame(spend = c(spend.control, spend.treatment), cell = c(rep(&quot;ctrl&quot;, 
        sample.size), rep(&quot;trt&quot;, sample.size)))
    m &lt;- lm(log(spend) ~ cell, data = df)
    coef(m)[2]
}
tau.hats &lt;- replicate(500, get.tau(0.05, 1000))
qplot(tau.hats, binwidth = 0.4/30) + geom_vline(aes(xintercept = 0), colour = &quot;red&quot;)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-5"/> </p>

<p>We can see that with this sample size, it looks like about a 1/3 of the time, with this sample size we&#39;ll report a negative treatment effect, despite the truth being a 5% increase in spend. 
Confirming what we can see graphically: </p>

<pre><code class="r">mean(tau.hats &lt; 0)
</code></pre>

<pre><code>## [1] 0.288
</code></pre>

<p>At this point, the would-be experimenter is likely to think the risk of picking the wrong horse is too great. 
Let&#39;s try tripling the sample size: </p>

<pre><code class="r">tau.hats2 &lt;- replicate(500, get.tau(0.05, 3000))
qplot(tau.hats2, binwidth = 0.4/30) + geom_vline(aes(xintercept = 0), colour = &quot;red&quot;)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-7"/> </p>

<p>Eyeballing, it looks like 10% of the mass is to the left of 0.  </p>

<pre><code class="r">mean(tau.hats2 &gt; 0)
</code></pre>

<pre><code>## [1] 0.854
</code></pre>

<p>10\% chance of picking the wrong horse might be acceptable and perhaps 3,000 per cell is the 
solution. 
But let&#39;s assume the effect of the treatment is strongly negative&mdash;that it&#39;s actually a 15% fall off in the treatment. 
What does that look like? </p>

<pre><code class="r">tau.hats2 &lt;- replicate(500, get.tau(-0.15, 3000))
qplot(tau.hats2, binwidth = 0.4/30) + geom_vline(aes(xintercept = 0), colour = &quot;red&quot;)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-9"/> </p>

<p>OK! If the bad horse is really bad, we&#39;ve got almost no chance of picking the bad horse. 
This is the kind assurance that the simulated power calculation can easily give in a graphical, intuitive way to the would-be experimenter. </p>

<hr/>
 <!-- Begin MailChimp Signup Form -->
<link href="http://cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css">
<style type="text/css">
	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif;  width:700px;}
	/* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="http://john-joseph-horton.us5.list-manage2.com/subscribe/post?u=fe0247e9bf28dc7b9dee81650&amp;id=3c90cbdf6e" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
	<label for="mce-EMAIL">Sign-up to receive research updates: </label>
	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
	<div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
</form>
</div>

 <a href="https://twitter.com/share" class="twitter-share-button" data-via="johnjhorton">Tweet</a> 
<div class="g-plusone" data-size="medium" data-annotation="inline" data-width="300"></div>

     <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'johnjosephhorton'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
 <!-- Place this tag after the last +1 button tag. -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script> </body></html>
